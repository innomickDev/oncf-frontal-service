swagger: "2.0"
info:
  version: "0.0.1"
  title: ONCF-2255-FO ExpressJS API
#during dev, should point to your local machine
#host: pprdweb-2255:8443
#host: localhost:8443
host: oncf-2255-api-dev.azurewebsites.net
# basePath prefixes all resource paths 
basePath: /api
# 
schemes:
  # tip: remove http to make production-grade
  - http
  - https
securityDefinitions:
  Bearer:
    type: apiKey
    name: Authorization
    in: header
    description: >
      For accessing the API a valid JWT token must be passed in all the queries
      in

      the 'Authorization' header.



      A valid JWT token is generated by the API and retourned as answer of a
      call

      to the route /login giving a valid user & password.



      The following syntax must be used in the 'Authorization' header :

          Bearer xxxxxx.yyyyyyy.zzzzzz
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
paths:
  /token:
    x-swagger-router-controller: auth
    post:
      tags:
      - "Auth"
      operationId: login
      parameters:
        - in: body
          name: body
          description: provide email and password for authentication
          required: true
          schema:
            $ref: "#/definitions/tokenModel"
        - name: Accept-Language
          in: header
          required: true
          type: string
          enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Account/LogOut:
    x-swagger-router-controller: auth
    post:
      tags:
      - "Auth"
      operationId: logout
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: body
        name: body
        required: true
        schema:
         $ref: "#/definitions/logOutModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Account/ActivateAccount:
    x-swagger-router-controller: account
    post:
      tags:
      - "Account"
      operationId: activateAccount
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: body
        name: body
        required: true
        schema:
         $ref: "#/definitions/activateAccountUserModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Account/UnlockAccount:
    x-swagger-router-controller: account
    post:
      tags:
      - "Account"
      operationId: unlockAccount
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: body
        name: body
        required: true
        schema:
         $ref: "#/definitions/activateAccountUserModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Account/ChangePassword:
    x-swagger-router-controller: account
    post:
      tags:
      - "Account"
      operationId: accountChangePassword
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: body
        name: body
        description: provide email, oldPassword and newPassword.
        required: true
        schema:
          $ref: "#/definitions/changePasswordModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Account/ConfirmForgottenPassword:
    x-swagger-router-controller: account
    post:
      tags:
      - "Account"
      operationId: confirmForgottenPassword
      parameters:
      - in: body
        name: body
        description: provide confirmationCode, email and newPassword.
        required: true
        schema:
          $ref: "#/definitions/confirmForgottenPasswordmodel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Account/ClientRegistration:
    x-swagger-router-controller: account
    post:
      tags:
      - "Account"
      operationId: clientRegistration
      parameters:
      - in: body
        name: body
        required: true
        schema:
         $ref: "#/definitions/clientRegistrationModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /MyProfile:
    x-swagger-router-controller: account
    get:
      tags:
      - "Account"
      operationId: myProfile
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /ForgotPassword:
    x-swagger-router-controller: account
    get:
      tags:
      - "Account"
      operationId: forgotPassword
      parameters:
      - name: email
        in: query
        required: true
        type: string
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
          "200":
            description: Success
            schema:
              # a pointer to a definition
              $ref: "#/definitions/ONCFResponse"
          # responses may fall through to errors
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
  /Category/GetCategories:
    x-swagger-router-controller: "category"
    get:
      tags:
      - "Category"
      operationId: getCategories
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "searchs"
        in: "query"
        required: false
        type: "integer"
        format: "int32"
      - name: "page"
        in: "query"
        required: false
        type: "integer"
        format: "int32"
      - name: "pageSize"
        in: "query"
        required: false
        type: "integer"
        format: "int32"
      - name: "sortField"
        in: "query"
        required: false
        type: "string"
      - name: "sortDirection"
        in: "query"
        required: false
        type: "string"
        enum:
        - "0"
        - "1"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /RunCronTab:
    x-swagger-router-controller: "category"
    get:
      tags:
      - "Category"
      operationId: runCronTab
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/CreateClaim:
    x-swagger-router-controller: "claim"
    post:
      tags:
      - "Claim"
      operationId: createClaim
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: "body"
        name: body
        required: true
        schema:
          $ref: "#/definitions/createClaimModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/GetTicketAttachment:
    x-swagger-router-controller: "claim"
    get:
      tags:
      - "Claim"
      operationId: getTicketAttachment
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "code"
        in: "query"
        required: true
        type: number
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/GetClaimAttachment:
    x-swagger-router-controller: "claim"
    get:
      tags:
      - "Claim"
      operationId: getClaimAttachment
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "code"
        in: "query"
        required: true
        type: number
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/UpdateTicketAttachment:
    x-swagger-router-controller: "claim"
    patch:
      tags:
      - "Claim"
      operationId: updateTicketAttachment
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: "body"
        name: body
        required: true
        schema:
          $ref: "#/definitions/updateTicketAttachmentModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/UpdateClaimAttachment:
    x-swagger-router-controller: "claim"
    patch:
      tags:
      - "Claim"
      operationId: updateClaimAttachment
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: "body"
        name: body
        required: true
        schema:
          $ref: "#/definitions/updateClaimAttachmentModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/UpdateClaim:
    x-swagger-router-controller: "claim"
    post:
      tags:
      - "Claim"
      operationId: updateClaim
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: "body"
        name: body
        required: true
        schema:
          $ref: "#/definitions/updateClaimModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/MyClaims:
    x-swagger-router-controller: "claim"
    get:
      tags:
      - "Claim"
      operationId: myClaims
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Claim/{code}:
    x-swagger-router-controller: "claim"
    get:
      tags:
      - "Claim"
      operationId: getClaimByCode
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "code"
        in: "path"
        required: true
        type: number
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /Station/GetStations:
    x-swagger-router-controller: "station"
    post:
      tags:
      - "Station"
      operationId: getStations
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - in: "body"
        name: body
        required: true
        schema:
          $ref: "#/definitions/getStationModel"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /SubCategory/GetSubCategories:
    x-swagger-router-controller: "subCategory"
    get:
      tags:
      - "SubCategory"
      operationId: getSubCategories
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "searchs"
        in: "query"
        required: false
        type: "string"
      - name: "page"
        in: "query"
        required: false
        type: "integer"
      - name: "pageSize"
        in: "query"
        required: false
        type: "integer"
      - name: "sortField"
        in: "query"
        required: false
        type: "string"
      - name: "sortDirection"
        in: "query"
        required: false
        type: "string"
        enum:
        - "0"
        - "1"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /SubCategory/GetSubCategoryByCategoryCode:
    x-swagger-router-controller: "subCategory"
    get:
      tags:
      - "SubCategory"
      operationId: "getSubCategoryByCategoryCode"
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "categoryCode"
        in: "query"
        required: true
        type: number
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /SubSubCategory/GetSubSubCategories:
    x-swagger-router-controller: "subSubCategory"
    get:
      tags:
      - "SubSubCategory"
      operationId: getSubSubCategories
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "searchs"
        in: "query"
        required: false
        type: "string"
      - name: "subCategoryCode"
        in: "query"
        required: false
        type: number
      - name: "page"
        in: "query"
        required: false
        type: "integer"
      - name: "pageSize"
        in: "query"
        required: false
        type: "integer"
      - name: "sortField"
        in: "query"
        required: false
        type: "string"
      - name: "sortDirection"
        in: "query"
        required: false
        type: "string"
        enum:
        - "0"
        - "1"
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /SubSubCategory/GetSubSubCategoryBySubCategoryCode:
    x-swagger-router-controller: "subSubCategory"
    get:
      tags:
      - "SubSubCategory"
      operationId: "getSubSubCategoryBySubCategoryCode"
      security:
        - Bearer: []
      x-security-scopes:  
        - customer
      parameters:
      - name: "subCategoryCode"
        in: "query"
        required: true
        type: number
      - name: Accept-Language
        in: header
        required: true
        type: string
        enum:
          - "fr-FR"
          - "en-US"
          - "ar-MA"
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/ONCFResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
  ONCFResponse:
    required:
      - data
      - error
      - isSuccess
    properties:
      data:
        type: object
      error:
        type: object
      isSuccess:
        type: boolean
  ErrorResponse:
    required:
      - data
      - error
      - isSuccess
    properties:
      data:
        type: object
      error:
        type: object
      isSuccess:
        type: boolean
  tokenModel:
    required:
      - grant_type
      - email
      - password
    properties:
      grant_type:
        type: string
        default: "password"
      email:
        type: string
      password:
        type: string
      refresh_token:
        type: string
  logOutModel:
    properties:
      code:
        type: string
      email:
        type: string
  activateAccountUserModel:
    required:
      - email
      - code
    properties:
      email:
        type: string
      code:
        type: string
  changePasswordModel:
    required:
      - email
      - oldPassword
      - newPassword
    properties:
      email:
        type: string
      oldPassword:
        type: string
      newPassword:
        type: string
  confirmForgottenPasswordmodel:
    required:
      - confirmationCode
      - email
      - newPassword
    properties:
      confirmationCode:
        type: string
      email:
        type: string
      newPassword:
        type: string
  clientRegistrationModel:
    properties:
      title:
        type: string
      firstName:
        type: string
      lastName:
        type: string
      mobileNumber:
        type: string
      city:
        type: string
      email:
        type: string
      password:
        type: string
  createClaimModel:
    required:
    - "arrivalStationCode"
    - "categoryCode"
    - "departureStationCode"
    - "subCategoryCode"
    - "ticketAttachment"
    - "trainNumber"
    - "travelDate"
    - "userCode"
    properties:
      departureStationCode:
        type: string
      arrivalStationCode:
        type: string
      trainNumber:
        type: string
      travelDate:
        type: "string"
      categoryCode:
        type: string
      subCategoryCode:
        type: string
      subSubCategoryCode:
        type: string
      claimSubject:
        type: "string"
      claimDetails:
        type: "string"
      ticketAttachment:
        type: "string"
      claimAttachment:
        type: "string"
      isONCFUser:
        type: "boolean"
      userEmail:
        type: string
      userCode:
        type: string
  updateClaimModel:
    required:
    - "code"
    properties:
      code:
        type: number
      claimDetails:
        type: "string"
  updateTicketAttachmentModel:
     properties:
      code:
        type: number
      attachment:
        type: "string"
  updateClaimAttachmentModel:
     properties:
      code:
        type: number
      attachment:
        type: string
  getStationModel:
    properties:
      searchs:
        type: array
        items:
          type: object
          properties:
            searchField:
              type: string
            value:
              type: string
      page:
        type: number
      pageSize:
        type: number
      sortField:
        type: string
      sortDirection:
        type: string
        enum:
        - "0"
        - "1"
    
    
      
      